<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="baidu-site-verification" content="1EB8XoOl0C"><meta name="google-site-verification" content="K7thEgdLm0UfRWJ5MGdF7sCcjClSzAlxFLPv2Oz5CGM"><title> Java 集合框架系列（五）Iterator API 总结 · Qida's Blog</title><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Java 集合框架系列（五）Iterator API 总结 - Qida's Blog"><meta name="keywords"><meta name="author" content="Qida's Blog"><link rel="short icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/bubuzou.css"><link rel="search" type="application/opensearchdescription+xml" href="https://qidawu.github.io/atom.xml" title="Qida's Blog"><meta name="generator" content="Hexo 4.2.1"></head><body><header><div class="header row"> <a href="/" class="logo-link"><img src="/images/logo.png"></a><a href="/" class="title-link">Qida's Blog</a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" data-hover="博文" class="nav-list-link">博文</a></li><li class="nav-list-item"><a href="/archives/" target="_self" data-hover="归档" class="nav-list-link">归档</a></li></ul><div class="search"><a id="search_btn" href="#search"></a></div></div></header><div class="row scroll-con"><section class="container"><!-- for archive page--><div id="postAr" class="post"><article class="post-block"><h1 class="post-title">Java 集合框架系列（五）Iterator API 总结</h1><div class="post-info">2018-05-01<a href="/tags/Java/" title="Java" class="post-demo">Java</a></div><div class="post-content"><p>本文总结下集合元素迭代的常用 API。</p>
<h1 id="迭代器模式"><a href="#迭代器模式" class="headerlink" title="迭代器模式"></a>迭代器模式</h1><blockquote>
<p>迭代器模式（Iterator）是一种行为型设计模式，让你能在不暴露集合底层表现形式（列表、栈和树等）的情况下遍历集合中所有的元素。</p>
</blockquote>
<p><img src="/img/java/design-pattern/Iterator.png" alt="Iterator"></p>
<h1 id="迭代器实现"><a href="#迭代器实现" class="headerlink" title="迭代器实现"></a>迭代器实现</h1><p>在 Java 中，迭代器模式的实现有以下几种：</p>
<p><img src="/img/java/design-pattern/Iterator_impl.png" alt="Iterator_impl"></p>
<ul>
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Enumeration.html" target="_blank" rel="noopener"><code>java.util.Enumeration&lt;E&gt;</code></a>：Java 1.0 引入，用于枚举集合元素。这种传统接口已被 <code>Iterator</code> 迭代器取代，虽然 <code>Enumeration</code> 还未被废弃，但在现代代码中已经被很少使用了。主要用于诸如 <code>java.util.Vector</code> 和 <code>java.util.Properties</code> 这些传统集合类。</li>
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html" target="_blank" rel="noopener"><code>java.util.Iterator&lt;E&gt;</code></a>：Java 1.2 引入。作为 <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/collections/index.html" target="_blank" rel="noopener">Java 集合框架</a>的成员，迭代器取代了枚举。迭代器与枚举有两个不同之处：<ul>
<li>引入 <code>remove</code> 方法，允许调用者在迭代期间从集合中删除元素。</li>
<li>方法名改进。</li>
</ul>
</li>
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html" target="_blank" rel="noopener"><code>java.lang.Iterable&lt;T&gt;</code></a>：Java 1.5 引入。<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/language/foreach.html" target="_blank" rel="noopener">For-each Loop</a> 语法糖的底层实现，实现这个接口的对象可以用于 “For-each Loop”语句，简化迭代器繁琐的使用语法。</li>
</ul>
<p>上述三种迭代器实现都属于<strong>命令式编程范式</strong>，即使访问值的方法仅由迭代器负责实现。但实际上，是由开发者来决定何时访问序列中的 <code>next()</code> 项。</p>
<h1 id="与-Stream-API-对比"><a href="#与-Stream-API-对比" class="headerlink" title="与 Stream API 对比"></a>与 Stream API 对比</h1><p><a href=""><code>java.util.stream.Stream&lt;T&gt;</code></a>：Java 8 引入，用于实现 Stream API。与迭代器的区别在于：</p>
<ul>
<li><p><code>Iterator</code> 外部迭代，使用命令式编程范式，完全由用户来决定”做什么“和”怎么做“，例如：</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;String&gt; example = Arrays.asList(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>);</span><br><span class="line">    List&lt;String&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;(example.size());</span><br><span class="line">    <span class="comment">// 怎么做（通过 Iterator API 遍历 List）</span></span><br><span class="line">    Iterator&lt;String&gt; iterator = example.iterator();</span><br><span class="line">    <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">        <span class="comment">// 做什么（把大写转成小写）</span></span><br><span class="line">        result.add(iterator.next().toLowerCase());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">iterable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;String&gt; example = Arrays.asList(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>);</span><br><span class="line">    List&lt;String&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;(example.size());</span><br><span class="line">    <span class="comment">// 怎么做（通过 For-each Loop 遍历 List）</span></span><br><span class="line">    <span class="keyword">for</span> (String s : example) &#123;</span><br><span class="line">        <span class="comment">// 做什么（把大写转成小写）</span></span><br><span class="line">        result.add(s.toLowerCase());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>  <img src="/img/java/collection/outer_iterator.png" alt="outer_iterator"></p>
</li>
<li><p><code>Stream</code> 内部迭代，使用声明式编程范式 &gt; 函数式编程，用户仅需要决定“做什么”，而把“怎么做”的任务交给 JVM：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">streamApi</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;String&gt; result = Arrays.asList(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>)</span><br><span class="line">        <span class="comment">// 这里遍历方式由 Stream API 实现，用户仅调用相应 API，数据量小可以用串行，数据量大可以用并行，怎么做、怎么实现用户并不用关心</span></span><br><span class="line">        .stream()</span><br><span class="line">        <span class="comment">// 做什么（把大写转成小写）</span></span><br><span class="line">        .map(String::toLowerCase)</span><br><span class="line">        <span class="comment">// 这里转成线性表由 Stream API 实现，用户仅调用相应 API，也可以转成集合、散列表，怎么实现用户并不关心。</span></span><br><span class="line">        .collect(Collectors.toList());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/img/java/collection/inner_iterator.png" alt="inner_iterator"></p>
</li>
</ul>
<p>使用内部迭代的优势在于：</p>
<ul>
<li>用户只需要关注问题本身，无需关注如何解决问题的细节。</li>
<li>Java 可以利用短路、并行等对性能进行优化，用户无需关心。</li>
</ul>
<h1 id="与-Reactive-Stream-对比"><a href="#与-Reactive-Stream-对比" class="headerlink" title="与 Reactive Stream 对比"></a>与 Reactive Stream 对比</h1><p>响应式编程范式通常在面向对象语言中作为<strong>观察者模式</strong>的扩展出现。可以将其与大家熟知的<strong>迭代器模式</strong>作对比，主要区别在于：</p>
<ul>
<li>迭代器、Stream API 基于<strong>拉模式（PULL）</strong></li>
<li>响应式流基于<strong>推模式（PUSH）</strong></li>
</ul>
<p>参考：<a href="/2020/08/01/java-reactive-programming/">响应式编程总结</a></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://refactoringguru.cn/design-patterns/iterator" target="_blank" rel="noopener">https://refactoringguru.cn/design-patterns/iterator</a></p>
</div></article></div><div class="right-container"><div class="widget"><div class="tagcloud"><h4>标签云</h4><a href="/tags/C-C/" style="font-size: 15px;">C/C++</a> <a href="/tags/DNS/" style="font-size: 12.5px;">DNS</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/GNU-Linux/" style="font-size: 16.67px;">GNU/Linux</a> <a href="/tags/Git/" style="font-size: 17.5px;">Git</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/MySQL/" style="font-size: 19.17px;">MySQL</a> <a href="/tags/Nginx/" style="font-size: 11.67px;">Nginx</a> <a href="/tags/Redis/" style="font-size: 10.83px;">Redis</a> <a href="/tags/Spring/" style="font-size: 15.83px;">Spring</a> <a href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" style="font-size: 11.67px;">函数式编程</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 18.33px;">前端</a> <a href="/tags/%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B/" style="font-size: 11.67px;">响应式编程</a> <a href="/tags/%E5%AE%89%E5%85%A8/" style="font-size: 12.5px;">安全</a> <a href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" style="font-size: 11.67px;">并发编程</a> <a href="/tags/%E5%BB%BA%E7%AB%99/" style="font-size: 13.33px;">建站</a> <a href="/tags/%E7%AE%A1%E7%90%86/" style="font-size: 12.5px;">管理</a> <a href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" style="font-size: 14.17px;">读书笔记</a> <a href="/tags/%E9%87%91%E8%9E%8D/" style="font-size: 12.5px;">金融</a></div></div><div class="widget"><div id="arAnchorBar"></div></div></div></section></div><div class="right-menu"></div><div class="modal search-modal"><div class="input-field"><input type="text" id="search_input"><label for="search-input">搜索</label></div><div id="search_result" class="search-result"></div></div><div class="blog-overlay"></div><footer class="row"><div class="footer-con"><div class="paginator"><a href="/2018/05/10/java-collections-comparator/" class="prev">PREV</a><a href="/2018/04/28/java-collections-framework-enhancements/" class="next">NEXT</a></div><div class="copyright"><p>© 2014 - 2021 <a href="https://github.com/qidawu" target="_blank">Qida's Blog</a></p><p>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> <br> and <a href="https://github.com/Bulandent/hexo-theme-bubuzou" target="_blank">hexo-theme-bubuzou</a></p></div><div class="totop"><i></i></div></div></footer><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script src="/scripts/jquery-1.8.2.min.js"></script><script src="https://cdn1.lncld.net/static/js/av-mini-0.6.10.js"></script><script src="/scripts/hit-kounter-lc-0.2.0.js"></script><script src="/scripts/arAnchor.js"></script><script src="/scripts/main.js"></script></body></html>